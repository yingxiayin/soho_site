const fs = require('fs')
const path = require('path')

// Read JSON file
const jsonFilePath = path.join(__dirname, '..', 'data', 'products.json')
const productsData = JSON.parse(fs.readFileSync(jsonFilePath, 'utf-8'))

// Generate TypeScript file
const tsFilePath = path.join(__dirname, '..', 'data', 'products-data.ts')

// Convert JSON to TypeScript with numeric keys
let tsContent = `// This file is auto-generated from products.json
// Do not edit this file directly. Edit products.json instead.

export const productsData = {
`

// Write each product with numeric key
Object.keys(productsData).sort((a, b) => parseInt(a) - parseInt(b)).forEach(key => {
  const product = productsData[key]
  const productJson = JSON.stringify(product, null, 2)
  // Indent each line
  const indented = productJson.split('\n').map((line, index) => {
    if (index === 0) return `  ${key}: ${line}`
    return `  ${line}`
  }).join('\n')
  tsContent += indented + ',\n'
})

tsContent += `}
`

fs.writeFileSync(tsFilePath, tsContent, 'utf-8')

console.log(`âœ… Generated products-data.ts with ${Object.keys(productsData).length} products`)
